<section class="search-section">
  <h2>Find Your Vehicle</h2>

  <!-- CAR / BIKE TABS -->
  <div class="vehicle-tabs">
    <button
      [class.active]="filter.vehicle === 'car'"
      (click)="selectVehicleType('car')">
      ğŸš— Cars
    </button>

    <button
      [class.active]="filter.vehicle === 'bike'"
      (click)="selectVehicleType('bike')">
      ğŸ Bikes
    </button>
  </div>

  <!-- FILTERS -->
  <form class="filters">

    <div class="filter-item">
      <label>ğŸ“… Pick-up Date</label>
      <input type="date"
        [(ngModel)]="filter.checkin"
        name="checkin"
        (change)="searchVehicles()" />
    </div>

    <div class="filter-item">
      <label>ğŸ“… Drop-off Date</label>
      <input type="date"
        [(ngModel)]="filter.checkout"
        name="checkout"
        (change)="searchVehicles()" />
    </div>

    <div class="filter-item">
      <label>ğŸ“ Location</label>
      <select
        [(ngModel)]="filter.location"
        name="location"
        (change)="searchVehicles()">
        <option value="">Select Location</option>
        <option value="mumbai">Mumbai</option>
        <option value="navi-mumbai">Navi Mumbai</option>
      </select>
    </div>

    <div class="filter-item" *ngIf="filter.vehicle === 'car'">
      <label>ğŸª‘ Seats</label>
      <select
        [(ngModel)]="filter.seats"
        name="seats"
        (change)="searchVehicles()">
        <option value="">Select Seats</option>
        <option value="4">4 Seats</option>
        <option value="6">6 Seats</option>
      </select>
    </div>

  </form>

  <!-- VEHICLE CARDS -->
  <div class="vehicle-cards">

    <!-- âœ… ADMIN ADD CARD -->
    <div class="card add-card"
      *ngIf="isAdmin"
      (click)="goToAddVehicle()">

      <div class="add-content">
        <h2>â•</h2>
        <p>Add New Vehicle</p>
      </div>
    </div>

    <!-- VEHICLE LIST -->
    <div class="card"
      *ngFor="let v of vehicles"
      (click)="goToBooking(v.vehicleId)">

      <img
        class="main-image"
        [src]="v.imageUrl"
        alt="{{ v.name }}"
        (click)="openImageModal(v, $event)" />

      <div class="vehicle-info">
        <h4>{{ v.name }}</h4>
        <p>Type: {{ v.type }}</p>
        <p *ngIf="v.type === 'car'">Seats: {{ v.seats }}</p>
        <p>Price: â‚¹{{ v.pricePerDay }}/day</p>
        <p>Status: {{ v.status }}</p>

        <!-- âœ… DELETE BUTTON ADMIN ONLY -->
        <button
          *ngIf="isAdmin"
          class="delete-btn"
          (click)="deleteVehicle(v.vehicleId, $event)">
          âŒ Delete
        </button>
      </div>
    </div>

  </div>
</section>

<!-- IMAGE MODAL -->
<div class="modal" *ngIf="selectedVehicle" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>{{ selectedVehicle.name }} - Images</h3>

    <div class="all-images">
      <img
        *ngFor="let img of selectedVehicle.images"
        [src]="img.imageUrl"
        alt="vehicle image" />
    </div>
  </div>
</div>